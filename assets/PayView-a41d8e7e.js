import{C as y}from"./CartBreadcrumb-647804f3.js";import{c as l}from"./cartStore-47b3a5cb.js";import{_ as v,m as I,a as x,r as _,o as c,c as i,b as s,d as h,w as B,e as r,t as e,F as p,i as w}from"./index-e62cb057.js";import{T as d}from"./toast-0bfe9fa7.js";const{VITE_API:m,VITE_PATH:u}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"howtobefine",BASE_URL:"/plat-records/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},F={data(){return{loadingBread:"",orderId:"",orderInfo:{},orderUser:{},orderProducts:[]}},methods:{getOrder(){this.orderId=this.$route.params.id;const n=`${m}api/${u}/order/${this.orderId}`;this.$http.get(n).then(t=>{this.orderInfo=t.data.order,this.orderUser=t.data.order.user,this.orderProducts=t.data.order.products}).catch(t=>{d.fire({icon:"error",title:`${t.response.data.message}`})})},pay(){this.orderId=this.$route.params.id;const n=`${m}api/${u}/pay/${this.orderId}`;this.$http.post(n).then(t=>{this.getOrder(),this.getCarts(),d.fire({icon:"success",title:`${t.data.message}`}),this.$router.push(`/completed/${this.orderId}`)}).catch(t=>{d.fire({icon:"error",title:`${t.response.data.message}`})})},...I(l,["getCarts"])},components:{CartBreadcrumb:y},computed:{...x(l,["cart"])},mounted(){this.loadingBread=this.$route.name,this.getOrder()}},T={class:"container-fluid"},$={class:"row"},U={class:"parallax py-10",style:{"background-image":"url(https://storage.googleapis.com/vue-course-api.appspot.com/howtobefine/1686751569347.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=P45LfLKV3FGlcRGefBEX%2FtJlrKyfUFaIHIb2R5p5WX3K7G1a%2Bxh5asNViDR8dEM0qeMZYngXGFBR6Sband5shgjX5a8U5kMm3peuenpDAQ5W4wmwF9jL4E97aJKh83Qfp1flk70RmXyRzDaDeRZ3zIjNzEQsvvlbU%2FWBhMTSl6ybYWp0w4TeD%2B7eeJgAh8u0%2BhJT2952Yp1C6PYxpAQGf%2FRws2szR0LUcfeerQ63B%2F6L16hZyt7C0bU6nX2Qxh2B%2FjlwjJtCcyLbKUUIFNh5kyX9LUXndFGFs6IDKXLgW0Au9XDwgLBBBCfBmota%2FeoRtHrpFHWm%2FMFDgNGsQGtfOA%3D%3D)"}},k=s("h2",{class:"text-center text-light display-5 mb-5 fw-bold pt-6"},"PAYMENT",-1),E={"aria-label":"breadcrumb"},A={class:"breadcrumb justify-content-center mb-0 fs-5"},D={class:"breadcrumb-item"},C=s("li",{class:"breadcrumb-item text-light active","aria-current":"page"},"PAYMENT",-1),N={class:"container"},P={class:"row pb-5 pb-lg-9 gy-5"},R={class:"col-lg-6"},L={class:"card shadow-lg rounded-0 border-0 p-4"},V={class:"d-flex justify-content-between align-items-center pb-3"},j={class:"h5 mb-0 d-flex align-items-center"},X={key:0,class:"ms-2 text-danger fs-6"},G={key:1,class:"text-success ms-2 fs-6"},S={class:"fs-5 mb-0 d-flex align-items-center"},M={class:"text-danger fs-6"},Q={class:"list-unstyled border-top"},z={class:"flex-shrink-0"},H=["src","alt"],K={class:"d-flex flex-column justify-content-between flex-grow-1 ms-3"},O={class:"d-flex align-items-center"},W={class:"h6 mb-0"},Y={class:"d-flex justify-content-between align-items-end"},J={class:"mb-0"},Z={class:"mb-0"},q={class:"col-lg-6"},ss={class:"card shadow-lg rounded-0 border-0 p-4"},es=s("h3",{class:"h5 mb-0 border-bottom pb-3"},"訂單資訊",-1),ts={class:"list-unstyled"},os={class:"py-2 border-bottom"},rs={class:"mb-0"},ns={class:"py-2 border-bottom"},as={class:"mb-0"},cs={class:"py-2 border-bottom"},is={class:"mb-0"},ds={class:"py-2 border-bottom"},ls={class:"mb-0"},_s={class:"py-2 border-bottom"},hs={class:"mb-0"},ps={class:"py-2 border-bottom"},ms={class:"mb-0"},us={class:"py-2 border-bottom"},bs={class:"mb-0"},fs={class:"py-2 border-bottom"},gs={class:"mb-0"};function ys(n,t,vs,Is,o,b){const f=_("router-link"),g=_("CartBreadcrumb");return c(),i(p,null,[s("div",T,[s("div",$,[s("div",U,[k,s("nav",E,[s("ol",A,[s("li",D,[h(f,{to:"/",class:"text-decoration-none link-light hvr-light"},{default:B(()=>[r("Home")]),_:1})]),C])])])])]),s("div",N,[h(g,{parentBread:o.loadingBread},null,8,["parentBread"]),s("div",P,[s("div",R,[s("div",L,[s("div",V,[s("h3",j,[r(" 訂單品項"),o.orderInfo.is_paid?(c(),i("span",G,"已付款")):(c(),i("span",X,"未付款"))]),s("p",S,[r(" 總金額："),s("span",M,"NT$ "+e(n.$filters.currency(o.orderInfo.total)),1)])]),s("ul",Q,[(c(!0),i(p,null,w(o.orderProducts,a=>(c(),i("li",{class:"d-flex border-bottom py-3",key:a.id},[s("div",z,[s("img",{src:a.product.imageUrl,alt:a.product.title,width:"80"},null,8,H)]),s("div",K,[s("div",O,[s("h4",W,e(a.product.title),1)]),s("div",Y,[s("p",J,[r(" NT$ "+e(n.$filters.currency(a.product.price))+" x ",1),s("span",null,e(a.qty),1)]),s("p",Z,"NT$ "+e(n.$filters.currency(a.total)),1)])])]))),128))])])]),s("div",q,[s("div",ss,[es,s("ul",ts,[s("li",os,[s("p",rs,[r(" 訂單金額： "),s("span",null,"NT$ "+e(n.$filters.currency(o.orderInfo.total)),1)])]),s("li",ns,[s("p",as,[r(" 訂單編號： "),s("span",null,e(o.orderInfo.id),1)])]),s("li",cs,[s("p",is,[r(" 下單時間： "),s("span",null,e(n.$filters.date(o.orderInfo.create_at)),1)])]),s("li",ds,[s("p",ls,[r(" 寄送地址： "),s("span",null,e(o.orderUser.address),1)])]),s("li",_s,[s("p",hs,[r(" 顧客姓名： "),s("span",null,e(o.orderUser.name),1)])]),s("li",ps,[s("p",ms,[r(" 連絡電話： "),s("span",null,e(o.orderUser.tel),1)])]),s("li",us,[s("p",bs,[r(" 電子信箱： "),s("span",null,e(o.orderUser.email),1)])]),s("li",fs,[s("p",gs,[r(" 客戶備註： "),s("span",null,e(o.orderInfo.message),1)])])]),s("button",{type:"button",class:"btn btn-danger w-100",onClick:t[0]||(t[0]=a=>b.pay())},"確認付款")])])])])],64)}const Ts=v(F,[["render",ys]]);export{Ts as default};
