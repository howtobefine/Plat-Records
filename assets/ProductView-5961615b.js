import{c as f}from"./cartStore-fc1f3ec3.js";import{f as S}from"./favoriteStore-ba49fbcd.js";import{_ as A,m as y,a as V,r as h,o as l,c,h as k,e as m,t as d,T as M,d as a,b as t,w as u,F as _,i as g,k as j,l as B,n as w,j as b}from"./index-45ab631b.js";import{A as E,S as N,a as D}from"./swiper.min-ac5a5b93.js";import{T as x}from"./toast-6c96786e.js";const{VITE_API:I,VITE_PATH:P}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"howtobefine",BASE_URL:"/plat-records/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},q={data(){return{product:{},images:[],productList:[],filteredProductList:[],modules:[E],productId:"",category:"",qty:1,activeIndex:0,isLoading:""}},methods:{...y(S,["toggleFavorite","isFavorite","removeFavorite"]),getProduct(s){const i=`${I}api/${P}/product/${s}`;this.isLoading=!0,this.$http.get(i).then(n=>{this.product=n.data.product,this.images=n.data.product.imagesUrl,this.category=n.data.product.category,this.activeIndex=0,this.getProductsList(n.data.product.category),this.isLoading=!1}).catch(n=>{x.fire({icon:"error",title:`${n.response.data.message}`})})},getProductsList(s){const i=`${I}api/${P}/products/?category=${s}`;this.$http.get(i).then(n=>{this.productList=n.data.products}).catch(n=>{x.fire({icon:"error",title:`${n.response.data.message}`})})},switchImage(s){this.activeIndex=s},...y(f,["addToCart"])},components:{Swiper:N,SwiperSlide:D},computed:{id(){return this.$route.params.id},...V(f,["loadingItem"])},watch:{id(s){this.productId=s,this.$route.name==="product"&&this.getProduct(this.productId)},productList(s){this.filteredProductList=s.filter(i=>i.id!==this.productId)}},mounted(){this.productId=this.$route.params.id,this.getProduct(this.productId)}},z={class:"container-fluid"},H={class:"row"},O={class:"parallax py-10",style:{"background-image":"url(https://storage.googleapis.com/vue-course-api.appspot.com/howtobefine/1685814603836.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=j8tpFoLvA5M4ZqIlMRHPbPpRqTAdXaYLGN6%2Fsbhk%2FJgr2SsQ4JSXjP97NtsMG3Mju3nDWNy6ypJ8A1mMz%2FCvZU0kBnhv6qQ5%2FM9UySvFPLyaFkJmwuimqEvdN4ouNe66WdPzFHR13n8WjjmKos25gzr0cxemZDP0BAFDuSmCXdKGtFSXMLSQ9wW5nPAcJ6hWtNdf4NMXOcrCIYMsFfP%2BySGlwuin5ObkapeK1Sm%2B%2B4Iz4k%2F8tRKGVFef66QVahNO3%2BFXioebcroid65J9jyJjA0UNszFyOa7tmIZOKsxEJg1XVnWKbd%2FL%2FLPGoErP1AyWxechU1z0jxMWmyy3hACjw%3D%3D)"}},U=t("h2",{class:"text-center text-light display-5 mb-5 fw-bold pt-6"},"DETAIL",-1),J={"aria-label":"breadcrumb"},R={class:"breadcrumb justify-content-center mb-0 fs-5"},W={class:"breadcrumb-item"},G={class:"breadcrumb-item"},X=t("li",{class:"breadcrumb-item text-light active","aria-current":"page"},"DETAIL",-1),K={class:"container"},Q={class:"row py-5 py-lg-9"},Z={class:"col-1 d-none d-lg-block"},Y={class:"d-flex flex-column list-unstyled gap-3"},$=["onClick"],tt=["src","alt"],et={class:"col-lg-6"},st=["src","alt"],ot={class:"mobile-list list-unstyled mt-3 d-lg-none"},it=["onClick"],lt=["src","alt"],nt={class:"col-lg-5 d-flex flex-column justify-content-between mt-4 mt-lg-0"},rt={class:"h2"},ct={class:"text-muted"},dt={class:"mt-4 h2 border-bottom pb-4"},at=["innerHTML"],ut={class:"d-flex gap-4 mb-4"},pt={class:"flex-grow-1 border"},ht={class:"d-flex justify-content-between"},_t=["disabled"],mt=t("i",{class:"bi bi-dash-lg"},null,-1),gt=[mt],bt=["disabled"],vt=t("i",{class:"bi bi-plus-lg"},null,-1),ft=[vt],yt={class:"border d-flex align-items-center cursor-pointer hvr-grow"},kt=["disabled"],wt={class:"pb-5 pb-lg-9"},xt=t("h3",{class:"border-bottom pb-2"},"曲目",-1),It=["innerHTML"],Pt={class:"container"},Ft={class:"pb-5 pb-lg-9"},Lt=t("h3",{class:"border-bottom pb-2"},"推薦商品",-1),Ct={class:"position-relative"},Tt=["src","alt"],St={class:"product-filter position-absolute translate-middle top-50 start-50 d-flex justify-content-end justify-content-lg-center align-items-end align-items-lg-center"},At={class:"d-flex gap-lg-3"},Vt={type:"button",class:"btn btn-outline-info border-dark bg-light bg-opacity-75 border-icon hvr-grow mb-2 me-2 mb-lg-0 me-lg-0 p-0"},Mt=["onClick"],jt=["onClick"],Bt=["onClick"],Et=t("i",{class:"bi bi-bag-fill text-dark"},null,-1),Nt=[Et],Dt={class:"card-body p-0 pt-3 text-center"},qt={class:"link-dark h5"},zt={class:"card-text text-muted mb-0"},Ht={class:"text-end mt-5"},Ot=t("div",{class:"fs-4"},[t("span",null,"回到產品列表"),t("i",{class:"bi bi-skip-backward-fill ms-2"})],-1);function Ut(s,i,n,Jt,e,v){const F=h("VueLoading"),p=h("router-link"),L=h("swiper-slide"),C=h("swiper");return l(),c(_,null,[(l(),k(M,{to:"title"},[m("｜"+d(e.product.title),1)])),a(F,{active:e.isLoading,"z-index":1060,loader:"dots",color:"#CB4042",transition:"fade"},null,8,["active"]),t("div",z,[t("div",H,[t("div",O,[U,t("nav",J,[t("ol",R,[t("li",W,[a(p,{to:"/",class:"text-decoration-none link-light hvr-light"},{default:u(()=>[m("Home")]),_:1})]),t("li",G,[a(p,{to:"/products",class:"text-decoration-none link-light hvr-light"},{default:u(()=>[m("PRODUCTS")]),_:1})]),X])])])])]),t("div",K,[t("div",Q,[t("div",Z,[t("ul",Y,[(l(!0),c(_,null,g(e.images,(o,r)=>(l(),c("li",{key:r,onClick:T=>v.switchImage(r),class:w(["opacity-75",{"opacity-100":r===e.activeIndex}])},[t("img",{src:o,alt:e.product.title,class:"img-fluid"},null,8,tt)],10,$))),128))])]),t("div",et,[t("img",{src:e.images[e.activeIndex],alt:e.product.id,class:"img-fluid"},null,8,st),t("ul",ot,[(l(!0),c(_,null,g(e.images,(o,r)=>(l(),c("li",{key:r,onClick:T=>v.switchImage(r),class:w(["opacity-75",{"opacity-100":r===e.activeIndex}])},[t("img",{src:o,alt:e.product.title,class:"w-100 img-fluid"},null,8,lt)],10,it))),128))])]),t("div",nt,[t("div",null,[t("h3",rt,d(e.product.title),1),t("span",ct,d(e.product.category),1),t("p",dt,"NT$ "+d(s.$filters.currency(e.product.price)),1),t("p",{class:"pt-3 lh-lg",innerHTML:e.product.description},null,8,at)]),t("div",null,[t("div",ut,[t("div",pt,[t("div",ht,[t("button",{type:"button",class:"border-0 bg-transparent p-2 ps-3",onClick:i[0]||(i[0]=o=>e.qty--),disabled:e.qty===1},gt,8,_t),j(t("input",{type:"number",class:"border-0 text-center w-100",min:"1",max:"20","onUpdate:modelValue":i[1]||(i[1]=o=>e.qty=o),readonly:""},null,512),[[B,e.qty,void 0,{number:!0}]]),t("button",{type:"button",class:"border-0 bg-transparent p-2 pe-3",onClick:i[2]||(i[2]=o=>e.qty++),disabled:e.qty===20},ft,8,bt)])]),t("div",yt,[s.isFavorite(e.product)?(l(),c("i",{key:0,class:"bi bi-heart-fill px-icon",onClick:i[3]||(i[3]=o=>s.toggleFavorite(e.product))})):(l(),c("i",{key:1,class:"bi bi-heart px-icon",onClick:i[4]||(i[4]=o=>s.toggleFavorite(e.product))}))])]),t("button",{type:"button",class:"btn btn-danger w-100 rounded-0",disabled:e.product.id===s.loadingItem,onClick:i[5]||(i[5]=o=>s.addToCart(e.product.id,this.qty))}," 加入購物車 ",8,kt)])])]),t("div",wt,[xt,t("p",{class:"lh-lg mb-0",innerHTML:e.product.content},null,8,It)])]),t("div",Pt,[t("div",Ft,[Lt,a(C,{slidesPerView:1,spaceBetween:48,autoplay:{delay:3e3,disableOnInteraction:!1},breakpoints:{768:{slidesPerView:2,spaceBetween:24},992:{slidesPerView:3,spaceBetween:24}},modules:e.modules,class:"h-100"},{default:u(()=>[(l(!0),c(_,null,g(e.filteredProductList,o=>(l(),k(L,{key:o.id},{default:u(()=>[a(p,{to:`/product/${o.id}`,class:"product-link card border-0 text-decoration-none"},{default:u(()=>[t("div",Ct,[t("img",{src:o.imageUrl,class:"card-img-top img-fluid",alt:o.title},null,8,Tt),t("div",St,[t("div",At,[t("button",Vt,[s.isFavorite(o)?(l(),c("i",{key:0,class:"bi bi-heart-fill text-dark px-icon",onClick:b(r=>s.toggleFavorite(o),["prevent"])},null,8,Mt)):(l(),c("i",{key:1,class:"bi bi-heart text-dark px-icon",onClick:b(r=>s.toggleFavorite(o),["prevent"])},null,8,jt))]),t("button",{type:"button",class:"btn btn-outline-info border-dark bg-light bg-opacity-75 border-icon hvr-grow mb-2 me-2 mb-lg-0 me-lg-0",onClick:b(r=>s.addToCart(o.id),["prevent"])},Nt,8,Bt)])])]),t("div",Dt,[t("h4",qt,d(o.title),1),t("div",null,[t("p",zt,"NT$ "+d(s.$filters.currency(o.price)),1)])])]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1},8,["modules"]),t("div",Ht,[a(p,{to:"/products",class:"link-dark text-decoration-none hvr-light hvr-grow d-inline-block"},{default:u(()=>[Ot]),_:1})])])])],64)}const Qt=A(q,[["render",Ut]]);export{Qt as default};
