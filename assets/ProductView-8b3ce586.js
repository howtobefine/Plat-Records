import{c as v}from"./cartStore-58a7a12c.js";import{f as C}from"./favoriteStore-6e4ddc88.js";import{_ as S,m as f,a as A,r as _,o as n,c,h as y,e as m,t as d,T as V,d as a,b as t,w as u,F as h,i as g,k as M,l as j,n as k,j as B}from"./index-8cd9b1e8.js";import{A as E,S as N,a as D}from"./swiper.min-334915eb.js";import{T as w}from"./toast-4b3d810b.js";const{VITE_API:x,VITE_PATH:I}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"howtobefine",BASE_URL:"/plat-records/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},q={data(){return{product:{},images:[],productList:[],filteredProductList:[],modules:[E],productId:"",category:"",qty:1,activeIndex:0,isLoading:""}},methods:{...f(C,["toggleFavorite","isFavorite","removeFavorite"]),getProduct(s){const o=`${x}api/${I}/product/${s}`;this.isLoading=!0,this.$http.get(o).then(l=>{this.product=l.data.product,this.images=l.data.product.imagesUrl,this.category=l.data.product.category,this.activeIndex=0,this.getProductsList(l.data.product.category),this.isLoading=!1}).catch(l=>{w.fire({icon:"error",title:`${l.response.data.message}`})})},getProductsList(s){const o=`${x}api/${I}/products/?category=${s}`;this.$http.get(o).then(l=>{this.productList=l.data.products}).catch(l=>{w.fire({icon:"error",title:`${l.response.data.message}`})})},switchImage(s){this.activeIndex=s},...f(v,["addToCart"])},components:{Swiper:N,SwiperSlide:D},computed:{id(){return this.$route.params.id},...A(v,["loadingItem"])},watch:{id(s){this.productId=s,this.$route.name==="product"&&this.getProduct(this.productId)},productList(s){this.filteredProductList=s.filter(o=>o.id!==this.productId)}},mounted(){this.productId=this.$route.params.id,this.getProduct(this.productId)}},z={class:"container-fluid"},H={class:"row"},O={class:"parallax py-10",style:{"background-image":"url(https://storage.googleapis.com/vue-course-api.appspot.com/howtobefine/1685814603836.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=j8tpFoLvA5M4ZqIlMRHPbPpRqTAdXaYLGN6%2Fsbhk%2FJgr2SsQ4JSXjP97NtsMG3Mju3nDWNy6ypJ8A1mMz%2FCvZU0kBnhv6qQ5%2FM9UySvFPLyaFkJmwuimqEvdN4ouNe66WdPzFHR13n8WjjmKos25gzr0cxemZDP0BAFDuSmCXdKGtFSXMLSQ9wW5nPAcJ6hWtNdf4NMXOcrCIYMsFfP%2BySGlwuin5ObkapeK1Sm%2B%2B4Iz4k%2F8tRKGVFef66QVahNO3%2BFXioebcroid65J9jyJjA0UNszFyOa7tmIZOKsxEJg1XVnWKbd%2FL%2FLPGoErP1AyWxechU1z0jxMWmyy3hACjw%3D%3D)"}},U=t("h2",{class:"text-center text-light display-5 mb-5 fw-bold pt-6"},"DETAIL",-1),J={"aria-label":"breadcrumb"},R={class:"breadcrumb justify-content-center mb-0 fs-5"},W={class:"breadcrumb-item"},G={class:"breadcrumb-item"},X=t("li",{class:"breadcrumb-item text-light active","aria-current":"page"},"DETAIL",-1),K={class:"container"},Q={class:"row py-5 py-lg-9"},Z={class:"col-1 d-none d-lg-block"},Y={class:"d-flex flex-column list-unstyled gap-3"},$=["onClick"],tt=["src","alt"],et={class:"col-lg-6"},st=["src","alt"],ot={class:"mobile-list list-unstyled mt-3 d-lg-none"},it=["onClick"],lt=["src","alt"],nt={class:"col-lg-5 d-flex flex-column justify-content-between mt-4 mt-lg-0"},rt={class:"h2"},ct={class:"text-muted"},dt={class:"mt-4 h2 border-bottom pb-4"},at=["innerHTML"],ut={class:"d-flex gap-4 mb-4"},pt={class:"flex-grow-1 border"},_t={class:"d-flex justify-content-between"},ht=["disabled"],mt=t("i",{class:"bi bi-dash-lg"},null,-1),gt=[mt],bt=["disabled"],vt=t("i",{class:"bi bi-plus-lg"},null,-1),ft=[vt],yt={class:"border d-flex align-items-center cursor-pointer hvr-grow"},kt=["disabled"],wt={class:"pb-5 pb-lg-9"},xt=t("h3",{class:"border-bottom pb-2"},"曲目",-1),It=["innerHTML"],Pt={class:"container"},Lt={class:"pb-5 pb-lg-9"},Ft=t("h3",{class:"border-bottom pb-2"},"推薦商品",-1),Tt={class:"position-relative"},Ct=["src","alt"],St={class:"product-filter position-absolute translate-middle top-50 start-50 d-flex justify-content-end justify-content-lg-center align-items-end align-items-lg-center"},At={class:"d-flex gap-lg-3"},Vt=t("button",{type:"button",class:"btn btn-outline-info border-dark bg-light bg-opacity-75 border-icon hvr-grow mb-2 me-2 mb-lg-0 me-lg-0"},[t("i",{class:"bi bi-heart text-dark"})],-1),Mt=["onClick"],jt=t("i",{class:"bi bi-bag-fill text-dark"},null,-1),Bt=[jt],Et={class:"card-body p-0 pt-3 text-center"},Nt={class:"link-dark h5"},Dt={class:"card-text text-muted mb-0"},qt={class:"text-end mt-5"},zt=t("div",{class:"fs-4"},[t("span",null,"回到產品列表"),t("i",{class:"bi bi-skip-backward-fill ms-2"})],-1);function Ht(s,o,l,Ot,e,b){const P=_("VueLoading"),p=_("router-link"),L=_("swiper-slide"),F=_("swiper");return n(),c(h,null,[(n(),y(V,{to:"title"},[m("｜"+d(e.product.title),1)])),a(P,{active:e.isLoading,"z-index":1060,loader:"dots",color:"#CB4042",transition:"fade"},null,8,["active"]),t("div",z,[t("div",H,[t("div",O,[U,t("nav",J,[t("ol",R,[t("li",W,[a(p,{to:"/",class:"text-decoration-none link-light hvr-light"},{default:u(()=>[m("Home")]),_:1})]),t("li",G,[a(p,{to:"/products",class:"text-decoration-none link-light hvr-light"},{default:u(()=>[m("PRODUCTS")]),_:1})]),X])])])])]),t("div",K,[t("div",Q,[t("div",Z,[t("ul",Y,[(n(!0),c(h,null,g(e.images,(i,r)=>(n(),c("li",{key:r,onClick:T=>b.switchImage(r),class:k(["opacity-75",{"opacity-100":r===e.activeIndex}])},[t("img",{src:i,alt:e.product.title,class:"img-fluid"},null,8,tt)],10,$))),128))])]),t("div",et,[t("img",{src:e.images[e.activeIndex],alt:e.product.id,class:"img-fluid"},null,8,st),t("ul",ot,[(n(!0),c(h,null,g(e.images,(i,r)=>(n(),c("li",{key:r,onClick:T=>b.switchImage(r),class:k(["opacity-75",{"opacity-100":r===e.activeIndex}])},[t("img",{src:i,alt:e.product.title,class:"w-100 img-fluid"},null,8,lt)],10,it))),128))])]),t("div",nt,[t("div",null,[t("h3",rt,d(e.product.title),1),t("span",ct,d(e.product.category),1),t("p",dt,"NT$ "+d(s.$filters.currency(e.product.price)),1),t("p",{class:"pt-3 lh-lg",innerHTML:e.product.description},null,8,at)]),t("div",null,[t("div",ut,[t("div",pt,[t("div",_t,[t("button",{type:"button",class:"border-0 bg-transparent p-2 ps-3",onClick:o[0]||(o[0]=i=>e.qty--),disabled:e.qty===1},gt,8,ht),M(t("input",{type:"number",class:"border-0 text-center w-100",min:"1",max:"20","onUpdate:modelValue":o[1]||(o[1]=i=>e.qty=i),readonly:""},null,512),[[j,e.qty,void 0,{number:!0}]]),t("button",{type:"button",class:"border-0 bg-transparent p-2 pe-3",onClick:o[2]||(o[2]=i=>e.qty++),disabled:e.qty===20},ft,8,bt)])]),t("div",yt,[s.isFavorite(e.product)?(n(),c("i",{key:0,class:"bi bi-heart-fill px-icon",onClick:o[3]||(o[3]=i=>s.toggleFavorite(e.product))})):(n(),c("i",{key:1,class:"bi bi-heart px-icon",onClick:o[4]||(o[4]=i=>s.toggleFavorite(e.product))}))])]),t("button",{type:"button",class:"btn btn-danger w-100 rounded-0",disabled:e.product.id===s.loadingItem,onClick:o[5]||(o[5]=i=>s.addToCart(e.product.id,this.qty))}," 加入購物車 ",8,kt)])])]),t("div",wt,[xt,t("p",{class:"lh-lg mb-0",innerHTML:e.product.content},null,8,It)])]),t("div",Pt,[t("div",Lt,[Ft,a(F,{slidesPerView:1,spaceBetween:48,autoplay:{delay:3e3,disableOnInteraction:!1},breakpoints:{768:{slidesPerView:2,spaceBetween:24},992:{slidesPerView:3,spaceBetween:24}},modules:e.modules,class:"h-100"},{default:u(()=>[(n(!0),c(h,null,g(e.filteredProductList,i=>(n(),y(L,{key:i.id},{default:u(()=>[a(p,{to:`/product/${i.id}`,class:"product-link card border-0 text-decoration-none"},{default:u(()=>[t("div",Tt,[t("img",{src:i.imageUrl,class:"card-img-top img-fluid",alt:i.title},null,8,Ct),t("div",St,[t("div",At,[Vt,t("button",{type:"button",class:"btn btn-outline-info border-dark bg-light bg-opacity-75 border-icon hvr-grow mb-2 me-2 mb-lg-0 me-lg-0",onClick:B(r=>s.addToCart(i.id),["prevent"])},Bt,8,Mt)])])]),t("div",Et,[t("h4",Nt,d(i.title),1),t("div",null,[t("p",Dt,"NT$ "+d(s.$filters.currency(i.price)),1)])])]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1},8,["modules"]),t("div",qt,[a(p,{to:"/products",class:"link-dark text-decoration-none hvr-light hvr-grow d-inline-block"},{default:u(()=>[zt]),_:1})])])])],64)}const Xt=S(q,[["render",Ht]]);export{Xt as default};
